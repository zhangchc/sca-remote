<?xml version="1.0" encoding="UTF-8"?>
<!-- æ—¥å¿—çº§åˆ«ä»ä½åˆ°é«˜åˆ†ä¸ºTRACE < DEBUG < INFO < WARN < ERROR < FATALï¼Œå¦‚æœè®¾ç½®ä¸ºWARNï¼Œåˆ™ä½äºWARNçš„ä¿¡æ¯éƒ½ä¸ä¼šè¾“å‡º -->
<!-- scan:å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œé…ç½®æ–‡æ¡£å¦‚æœå‘ç”Ÿæ”¹å˜ï¼Œå°†ä¼šè¢«é‡æ–°åŠ è½½ï¼Œé»˜è®¤å€¼ä¸ºtrue -->
<!-- scanPeriod:è®¾ç½®ç›‘æµ‹é…ç½®æ–‡æ¡£æ˜¯å¦æœ‰ä¿®æ”¹çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºæ—¶é—´å•ä½ï¼Œé»˜è®¤å•ä½æ˜¯æ¯«ç§’ã€‚ å½“scanä¸ºtrueæ—¶ï¼Œæ­¤å±æ€§ç”Ÿæ•ˆã€‚é»˜è®¤çš„æ—¶é—´é—´éš”ä¸º1åˆ†é’Ÿã€‚ -->
<!-- debug:å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œå°†æ‰“å°å‡ºlogbackå†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œå®æ—¶æŸ¥çœ‹logbackè¿è¡ŒçŠ¶æ€ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚ -->
<configuration scan="true" scanPeriod="60 seconds"
               debug="false">
    <!-- contextName:ç”¨æ¥è®¾ç½®ä¸Šä¸‹æ–‡åç§°ï¼Œæ¯ä¸ªloggeréƒ½å…³è”åˆ°loggerä¸Šä¸‹æ–‡ï¼Œé»˜è®¤ä¸Šä¸‹æ–‡åç§°ä¸ºdefaultã€‚ä½†å¯ä»¥ä½¿ç”¨<contextName>è®¾ç½®æˆå…¶ä»–åå­—ï¼Œç”¨äºåŒºåˆ†ä¸åŒåº”ç”¨ç¨‹åºçš„è®°å½•ã€‚ä¸€æ—¦è®¾ç½®ï¼Œä¸èƒ½ä¿®æ”¹ã€‚-->

    <contextName>myApp</contextName>

    <!-- <springProperty scope="context" name="logPath" source="logging.path"
        defaultValue="logs"/> -->
    <!-- nameçš„å€¼æ˜¯å˜é‡çš„åç§°ï¼Œvalueçš„å€¼æ—¶å˜é‡å®šä¹‰çš„å€¼ã€‚é€šè¿‡å®šä¹‰çš„å€¼ä¼šè¢«æ’å…¥åˆ°loggerä¸Šä¸‹æ–‡ä¸­ã€‚å®šä¹‰åï¼Œå¯ä»¥ä½¿â€œ${}â€æ¥ä½¿ç”¨å˜é‡ã€‚ -->
    <property name="log.path" value="logs/" />

    <!--0. æ—¥å¿—æ ¼å¼å’Œé¢œè‰²æ¸²æŸ“ -->
    <!-- å½©è‰²æ—¥å¿—ä¾èµ–çš„æ¸²æŸ“ç±» -->
    <conversionRule conversionWord="clr"
                    converterClass="org.springframework.boot.logging.logback.ColorConverter" />
    <conversionRule conversionWord="wex"
                    converterClass="org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter" />
    <conversionRule conversionWord="wEx"
                    converterClass="org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter" />
    <!-- å½©è‰²æ—¥å¿—æ ¼å¼ -->
    <property name="CONSOLE_LOG_PATTERN"
              value="${CONSOLE_LOG_PATTERN:-%clr(%d{yyyy-MM-dd HHğŸ‡²ğŸ‡²ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}" />

    <!--1. è¾“å‡ºåˆ°æ§åˆ¶å° -->
    <appender name="CONSOLE"
              class="ch.qos.logback.core.ConsoleAppender">
        <!-- æ­¤æ—¥å¿—appenderæ˜¯ä¸ºå¼€å‘ä½¿ç”¨ï¼Œåªé…ç½®æœ€åº•çº§åˆ«ï¼Œæ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—çº§åˆ«æ˜¯å¤§äºæˆ–ç­‰äºæ­¤çº§åˆ«çš„æ—¥å¿—ä¿¡æ¯ -->
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
            <level>debug</level>
        </filter>
        <encoder>
            <Pattern>${CONSOLE_LOG_PATTERN}</Pattern>
            <!-- è®¾ç½®å­—ç¬¦é›† -->
            <charset>UTF-8</charset>
        </encoder>
    </appender>



    <!--2. è¾“å‡ºåˆ°æ–‡æ¡£ -->
    <!-- 2.1 levelä¸º DEBUG æ—¥å¿—ï¼Œæ—¶é—´æ»šåŠ¨è¾“å‡º -->
    <appender name="DEBUG_FILE"
              class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡æ¡£çš„è·¯å¾„åŠæ–‡æ¡£å -->
        <file>${log.path}/web_debug.log</file>
        <!--æ—¥å¿—æ–‡æ¡£è¾“å‡ºæ ¼å¼ -->
        <encoder>
            <pattern>%d{yyyy-MM-dd HHğŸ‡²ğŸ‡²ss.SSS} [%thread] %-5level %logger{50} -
                %msg%n</pattern>
            <charset>UTF-8</charset> <!-- è®¾ç½®å­—ç¬¦é›† -->
        </encoder>
        <!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• -->
        <rollingPolicy
                class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <!-- æ—¥å¿—å½’æ¡£ -->
            <fileNamePattern>${log.path}/web-debug-%d{yyyy-MM-dd}.%i.log
            </fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy
                    class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <!--æ—¥å¿—æ–‡æ¡£ä¿ç•™å¤©æ•° -->
            <maxHistory>15</maxHistory>
        </rollingPolicy>
        <!-- æ­¤æ—¥å¿—æ–‡æ¡£åªè®°å½•debugçº§åˆ«çš„ -->
        <filter class="ch.qos.logback.classic.filter.LevelFilter">
            <level>debug</level>
            <onMatch>ACCEPT</onMatch>
            <onMismatch>DENY</onMismatch>
        </filter>
    </appender>

    <!-- 2.2 levelä¸º INFO æ—¥å¿—ï¼Œæ—¶é—´æ»šåŠ¨è¾“å‡º -->
    <appender name="INFO_FILE"
              class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡æ¡£çš„è·¯å¾„åŠæ–‡æ¡£å -->
        <file>${log.path}/web_info.log</file>
        <!--æ—¥å¿—æ–‡æ¡£è¾“å‡ºæ ¼å¼ -->
        <encoder>
            <pattern>%d{yyyy-MM-dd HHğŸ‡²ğŸ‡²ss.SSS} [%thread] %-5level %logger{50} -
                %msg%n</pattern>
            <charset>UTF-8</charset>
        </encoder>
        <!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• -->
        <rollingPolicy
                class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <!-- æ¯å¤©æ—¥å¿—å½’æ¡£è·¯å¾„ä»¥åŠæ ¼å¼ -->
            <fileNamePattern>${log.path}/web-info-%d{yyyy-MM-dd}.%i.log
            </fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy
                    class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <!--æ—¥å¿—æ–‡æ¡£ä¿ç•™å¤©æ•° -->
            <maxHistory>15</maxHistory>
        </rollingPolicy>
        <!-- æ­¤æ—¥å¿—æ–‡æ¡£åªè®°å½•infoçº§åˆ«çš„ -->
        <filter class="ch.qos.logback.classic.filter.LevelFilter">
            <level>info</level>
            <onMatch>ACCEPT</onMatch>
            <onMismatch>DENY</onMismatch>
        </filter>
    </appender>

    <!-- 2.3 levelä¸º WARN æ—¥å¿—ï¼Œæ—¶é—´æ»šåŠ¨è¾“å‡º -->
    <appender name="WARN_FILE"
              class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡æ¡£çš„è·¯å¾„åŠæ–‡æ¡£å -->
        <file>${log.path}/web_warn.log</file>
        <!--æ—¥å¿—æ–‡æ¡£è¾“å‡ºæ ¼å¼ -->
        <encoder>
            <pattern>%d{yyyy-MM-dd HHğŸ‡²ğŸ‡²ss.SSS} [%thread] %-5level %logger{50} -
                %msg%n</pattern>
            <charset>UTF-8</charset> <!-- æ­¤å¤„è®¾ç½®å­—ç¬¦é›† -->
        </encoder>
        <!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• -->
        <rollingPolicy
                class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${log.path}/web-warn-%d{yyyy-MM-dd}.%i.log
            </fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy
                    class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <!--æ—¥å¿—æ–‡æ¡£ä¿ç•™å¤©æ•° -->
            <maxHistory>15</maxHistory>
        </rollingPolicy>
        <!-- æ­¤æ—¥å¿—æ–‡æ¡£åªè®°å½•warnçº§åˆ«çš„ -->
        <filter class="ch.qos.logback.classic.filter.LevelFilter">
            <level>warn</level>
            <onMatch>ACCEPT</onMatch>
            <onMismatch>DENY</onMismatch>
        </filter>
    </appender>

    <!-- 2.4 levelä¸º ERROR æ—¥å¿—ï¼Œæ—¶é—´æ»šåŠ¨è¾“å‡º -->
    <appender name="ERROR_FILE"
              class="ch.qos.logback.core.rolling.RollingFileAppender">
        <!-- æ­£åœ¨è®°å½•çš„æ—¥å¿—æ–‡æ¡£çš„è·¯å¾„åŠæ–‡æ¡£å -->
        <file>${log.path}/web_error.log</file>
        <!--æ—¥å¿—æ–‡æ¡£è¾“å‡ºæ ¼å¼ -->
        <encoder>
            <pattern>%d{yyyy-MM-dd HHğŸ‡²ğŸ‡²ss.SSS} [%thread] %-5level %logger{50} -
                %msg%n</pattern>
            <charset>UTF-8</charset> <!-- æ­¤å¤„è®¾ç½®å­—ç¬¦é›† -->
        </encoder>
        <!-- æ—¥å¿—è®°å½•å™¨çš„æ»šåŠ¨ç­–ç•¥ï¼ŒæŒ‰æ—¥æœŸï¼ŒæŒ‰å¤§å°è®°å½• -->
        <rollingPolicy
                class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${log.path}/web-error-%d{yyyy-MM-dd}.%i.log
            </fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy
                    class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>100MB</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <!--æ—¥å¿—æ–‡æ¡£ä¿ç•™å¤©æ•° -->
            <maxHistory>15</maxHistory>
        </rollingPolicy>
        <!-- æ­¤æ—¥å¿—æ–‡æ¡£åªè®°å½•ERRORçº§åˆ«çš„ -->
        <filter class="ch.qos.logback.classic.filter.LevelFilter">
            <level>ERROR</level>
            <onMatch>ACCEPT</onMatch>
            <onMismatch>DENY</onMismatch>
        </filter>
    </appender>


    <!-- <logger>ç”¨æ¥è®¾ç½®æŸä¸€ä¸ªåŒ…æˆ–è€…å…·ä½“çš„æŸä¸€ä¸ªç±»çš„æ—¥å¿—æ‰“å°çº§åˆ«ã€ ä»¥åŠæŒ‡å®š<appender>ã€‚<logger>ä»…æœ‰ä¸€ä¸ªnameå±æ€§ï¼Œ
        ä¸€ä¸ªå¯é€‰çš„levelå’Œä¸€ä¸ªå¯é€‰çš„addtivityå±æ€§ã€‚ name:ç”¨æ¥æŒ‡å®šå—æ­¤loggerçº¦æŸçš„æŸä¸€ä¸ªåŒ…æˆ–è€…å…·ä½“çš„æŸä¸€ä¸ªç±»ã€‚ level:ç”¨æ¥è®¾ç½®æ‰“å°çº§åˆ«ï¼Œå¤§å°å†™æ— å…³ï¼šTRACE,
        DEBUG, INFO, WARN, ERROR, ALL å’Œ OFFï¼Œ è¿˜æœ‰ä¸€ä¸ªç‰¹ä¿—å€¼INHERITEDæˆ–è€…åŒä¹‰è¯NULLï¼Œä»£è¡¨å¼ºåˆ¶æ‰§è¡Œä¸Šçº§çš„çº§åˆ«ã€‚
        å¦‚æœæœªè®¾ç½®æ­¤å±æ€§ï¼Œé‚£ä¹ˆå½“å‰loggerå°†ä¼šç»§æ‰¿ä¸Šçº§çš„çº§åˆ«ã€‚ addtivity:æ˜¯å¦å‘ä¸Šçº§loggerä¼ é€’æ‰“å°ä¿¡æ¯ã€‚é»˜è®¤æ˜¯trueã€‚ <logger
        name="org.springframework.web" level="info"/> <logger name="org.springframework.scheduling.annotation.ScheduledAnnotationBeanPostProcessor"
        level="INFO"/> -->

    <!-- ä½¿ç”¨mybatisçš„æ—¶å€™ï¼Œsqlè¯­å¥æ˜¯debugä¸‹æ‰ä¼šæ‰“å°ï¼Œè€Œè¿™é‡Œæˆ‘ä»¬åªé…ç½®äº†infoï¼Œæ‰€ä»¥æƒ³è¦æŸ¥çœ‹sqlè¯­å¥çš„è¯ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ“ä½œï¼š
        ç¬¬ä¸€ç§æŠŠ<root level="info">æ”¹æˆ<root level="DEBUG">è¿™æ ·å°±ä¼šæ‰“å°sqlï¼Œä¸è¿‡è¿™æ ·æ—¥å¿—é‚£è¾¹ä¼šå‡ºç°å¾ˆå¤šå…¶ä»–æ¶ˆæ¯
        ç¬¬äºŒç§å°±æ˜¯å•ç‹¬ç»™daoä¸‹ç›®å½•é…ç½®debugæ¨¡å¼ï¼Œä»£ç å¦‚ä¸‹ï¼Œè¿™æ ·é…ç½®sqlè¯­å¥ä¼šæ‰“å°ï¼Œå…¶ä»–è¿˜æ˜¯æ­£å¸¸infoçº§åˆ«ï¼š ã€logging.level.org.mybatis=debug
        logging.level.dao=debugã€‘ -->

    <!-- rootèŠ‚ç‚¹æ˜¯å¿…é€‰èŠ‚ç‚¹ï¼Œç”¨æ¥æŒ‡å®šæœ€åŸºç¡€çš„æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œåªæœ‰ä¸€ä¸ªlevelå±æ€§ level:ç”¨æ¥è®¾ç½®æ‰“å°çº§åˆ«ï¼Œå¤§å°å†™æ— å…³ï¼šTRACE,
        DEBUG, INFO, WARN, ERROR, ALL å’Œ OFFï¼Œ ä¸èƒ½è®¾ç½®ä¸ºINHERITEDæˆ–è€…åŒä¹‰è¯NULLã€‚é»˜è®¤æ˜¯DEBUG å¯ä»¥åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œæ ‡è¯†è¿™ä¸ªappenderå°†ä¼šæ·»åŠ åˆ°è¿™ä¸ªloggerã€‚ -->


    <!-- å¸¸ç”¨loggeré…ç½® -->
    <!-- show parameters for hibernate sql ä¸“ä¸º Hibernate å®šåˆ¶ -->
    <logger name="org.hibernate.type.descriptor.sql.BasicBinder" level="TRACE" />
    <logger name="org.hibernate.type.descriptor.sql.BasicExtractor" level="DEBUG" />
    <logger name="org.hibernate.SQL" level="DEBUG" />
    <logger name="org.hibernate.engine.QueryParameters" level="DEBUG" />
    <logger name="org.hibernate.engine.query.HQLQueryPlan" level="DEBUG" />

    <!--myibatis log configure-->
    <logger name="com.apache.ibatis" level="TRACE"/>
    <logger name="java.sql.Connection" level="DEBUG"/>
    <logger name="java.sql.Statement" level="DEBUG"/>
    <logger name="java.sql.PreparedStatement" level="DEBUG"/>

    <!--æ‰“å°sqlé…ç½®-->
    <logger name="cn.maruifu.myAppName.module.dao" level="DEBUG"/>


    <!-- 4. æœ€ç»ˆçš„ç­–ç•¥ -->
    <!-- 4.1 å¼€å‘ç¯å¢ƒ:æ‰“å°æ§åˆ¶å° -->
    <springProfile name="dev">
        <root level="info">
            <appender-ref ref="CONSOLE" />
        </root>
    </springProfile>


    <!-- 4.2 ç”Ÿäº§ç¯å¢ƒ:è¾“å‡ºåˆ°æ–‡æ¡£ -->
    <springProfile name="prod">
        <root level="info">
            <appender-ref ref="CONSOLE" />
            <appender-ref ref="DEBUG_FILE" />
            <appender-ref ref="INFO_FILE" />
            <appender-ref ref="WARN_FILE" />
            <appender-ref ref="ERROR_FILE" />
        </root>
    </springProfile>

</configuration>